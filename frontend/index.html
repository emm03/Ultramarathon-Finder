<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ultramarathon Connect</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="alanai_chatbot/chat-widget.css" />
    <link rel="icon" href="ultra_favicon.ico" type="image/x-icon" />

    <!-- üîê Load global login/session logic -->
    <script src="auth_utils.js" defer></script>
</head>

<body class="forum-page">
    <header class="sticky-header dual-row-header">
        <div class="header-top-row">
            <div class="mobile-header-container">
                <a href="index.html" class="header-left" style="text-decoration: none; color: inherit;">
                    <img src="ultra.png" alt="Ultramarathon Connect Logo" class="logo" />
                    <span class="site-title">UltramarathonConnect</span>
                </a>
                <button class="menu-toggle">‚ò∞</button>
            </div>
            <div id="account-tab" class="auth-tab mobile-account-tab"></div>
        </div>

        <div class="header-bottom-row">
            <nav class="header-right">
                <ul class="menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="race_directory.html">Race Directory</a></li>
                    <li><a href="forum.html">Runner Community</a></li>
                    <li><a href="articles.html">Articles</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <!-- Main Image Carousel -->
        <div class="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="images/ultramarathon_images/download1_ultramarathon.jpeg" alt="Trail Run" />
                    <div class="carousel-overlay">
                        <h1>Welcome to Ultramarathon Connect</h1>
                        <p>Discover, prepare, and connect with ultramarathons worldwide!</p>
                        <button onclick="window.location.href='race_directory.html'">Find a Race</button>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="images/ultramarathon_images/download2_ultramarathon.jpeg" alt="Mountain Trail" />
                    <div class="carousel-overlay">
                        <h1>Welcome to Ultramarathon Connect</h1>
                        <p>Discover, prepare, and connect with ultramarathons worldwide!</p>
                        <button onclick="window.location.href='race_directory.html'">Find a Race</button>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="images/ultramarathon_images/download3_ultramarathon.jpg" alt="Forest Trail" />
                    <div class="carousel-overlay">
                        <h1>Welcome to Ultramarathon Connect</h1>
                        <p>Discover, prepare, and connect with ultramarathons worldwide!</p>
                        <button onclick="window.location.href='race_directory.html'">Find a Race</button>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="images/ultramarathon_images/download4_ultramarathon.jpeg" alt="Desert Trail" />
                    <div class="carousel-overlay">
                        <h1>Welcome to Ultramarathon Connect</h1>
                        <p>Discover, prepare, and connect with ultramarathons worldwide!</p>
                        <button onclick="window.location.href='race_directory.html'">Find a Race</button>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="images/ultramarathon_images/download5_ultramarathon.jpeg" alt="Snowy Trail" />
                    <div class="carousel-overlay">
                        <h1>Welcome to Ultramarathon Connect</h1>
                        <p>Discover, prepare, and connect with ultramarathons worldwide!</p>
                        <button onclick="window.location.href='race_directory.html'">Find a Race</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Training Log Teaser -->
        <section class="training-log-teaser" id="trainingLogTeaser">
            <h2>üèÉ Personal Training Log</h2>
            <p>Track your weekly runs and visualize your ultramarathon journey.</p>
            <p><strong>Connect your Strava account to unlock your personal log.</strong></p>
            <div class="teaser-buttons">
                <a href="training_log.html" class="orange-btn">Go to Your Personal Training Log</a>
            </div>
            <div class="teaser-buttons">
                <button id="login-button" class="orange-btn">Sign In</button>
                <a href="register.html" class="orange-btn">Create Account</a>
            </div>
            <p class="note">üîí Training Log is available only to logged-in users.</p>
        </section>

        <p class="strava-credit">Data provided by <a href="https://www.strava.com" target="_blank">Strava</a></p>

        <!-- Race Map -->
        <section class="map-preview">
            <h2>Explore Upcoming Races</h2>
            <div id="race-map"></div>
            <button class="orange-btn" onclick="window.location.href='race_directory.html'">Browse Full
                Directory</button>
        </section>

        <!-- Forum Preview -->
        <section class="latest-posts">
            <h2>Recent Conversations</h2>
            <div id="forum-preview-list" class="forum-preview-list"></div>
            <button class="orange-btn" onclick="window.location.href='forum/forum.html'">View All Posts</button>
        </section>

        <!-- Article Carousel -->
        <section class="articles-section">
            <h2>Recent Articles</h2>
            <div class="carousel-container">
                <button class="scroll-btn left" onclick="scrollCarousel(-1)">&#8592;</button>
                <div class="article-carousel" id="articleCarousel">

                    <div class="article-card">
                        <img src="images/ultra_jun28weekend.jpg" alt="Western States runners 2025" />
                        <h3>Ultra Recap: June 28‚Äì29</h3>
                        <p>Western States 100, Black Hills, and course records across North America.</p>
                        <a href="articles/ultra_weekend_jun28.html">Read More</a>
                    </div>

                    <div class="article-card">
                        <img src="images/ultra_jun21weekend.jpg" alt="Bighorn and Broken Arrow 2025" />
                        <h3>Ultra Recap: June 21‚Äì22</h3>
                        <p>Skyraces, thunderstorms, and summer ultras from Wyoming to Washington.</p>
                        <a href="articles/ultra_weekend_jun21.html">Read More</a>
                    </div>

                    <div class="article-card">
                        <img src="images/ultra_jun14weekend.jpg" alt="Mid-June ultras" />
                        <h3>Ultra Recap: June 14‚Äì15</h3>
                        <p>Coastal trails, European climbs, and record-breaking 24‚Äëhour runs.</p>
                        <a href="articles/ultra_weekend_jun14.html">Read More</a>
                    </div>

                    <div class="article-card">
                        <img src="images/ultra_jun8weekend.jpg" alt="Lake Sonoma and Utah mountain runs" />
                        <h3>Ultra Recap: June 7‚Äì8</h3>
                        <p>Lake Sonoma, North Fork, and mountain slogs kick off June‚Äôs second week.</p>
                        <a href="articles/ultra_weekend_jun8.html">Read More</a>
                    </div>

                    <div class="article-card">
                        <img src="images/ultra_jun1weekend.jpg" alt="Early June ultramarathons" />
                        <h3>Ultra Recap: June 1‚Äì2</h3>
                        <p>Runners tackled heat and hills across summer‚Äôs opening weekend.</p>
                        <a href="articles/ultra_weekend_jun1.html">Read More</a>
                    </div>

                    <div class="article-card">
                        <img src="images/ultra_may31weekend.jpg" alt="End of May ultra events" />
                        <h3>Ultra Recap: May 31‚ÄìJune 1</h3>
                        <p>Closing out May with strong performances across the U.S. and beyond.</p>
                        <a href="articles/ultra_weekend_may31.html">Read More</a>
                    </div>

                </div>
                <button class="scroll-btn right" onclick="scrollCarousel(1)">&#8594;</button>
            </div>
            <div style="text-align: center; margin-top: 1rem;">
                <a href="articles.html" class="orange-btn">View All Articles ‚Üí</a>
            </div>
        </section>
    </main>

    <!-- Alan Chat Widget -->
    <div id="alan-bubble">üí¨</div>
    <div id="alan-window">
        <div id="alan-messages"></div>
        <form id="alan-form">
            <input id="alan-input" type="text" placeholder="Ask Alan about races..." />
            <button type="submit">Send</button>
        </form>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-links">
            <a href="contact.html">Contact Us</a> |
            <a href="privacy.html">Privacy Policy</a> |
            <a href="termsofservice.html">Terms of Service</a> |
            <a href="faq.html">FAQ</a> |
        </div>
        <p class="footer-copy">&copy; 2025 Ultramarathon Connect. All rights reserved.</p>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <script src="index_script.js"></script>
    <script src="alanai_chatbot/alan.js"></script>
    <script>
        const token = localStorage.getItem("token");
        const loginButton = document.getElementById("login-button");
        if (loginButton) {
            loginButton.addEventListener("click", () => {
                if (token) {
                    alert("‚úÖ You are already logged in!");
                } else {
                    window.location.href = 'login.html';
                }
            });
        }
    </script>
</body>

</html>